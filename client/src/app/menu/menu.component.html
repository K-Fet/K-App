<div class="body-container" [class.is-mobile]="mobileQuery.matches">
	<mat-toolbar color="primary" class="toolbar">
		<button mat-icon-button (click)="snav.toggle()" *ngIf="!user.isGuest()"><mat-icon>menu</mat-icon></button>
		<h1 class="app-name">K-App</h1>
		<span class="spacer"></span>
        <mat-menu #personnalInformation="matMenu" [overlapTrigger]="false">
            <div *ngIf="user?.barman">
				<p>Compte Barman {{user.barman.nickname}}</p>
				<!-- TODO add more information -->
			</div>
			<div *ngIf="user?.specialAccount">
				<p>Compte sp√©cial {{user.specialAccount.connection.username}}</p>
				<!-- TODO add more information -->
			</div>
        </mat-menu>
        <button *ngIf="!user.isGuest()" mat-icon-button [matMenuTriggerFor]="personnalInformation">
            <mat-icon class="example-icon">person</mat-icon>
        </button>
		<button type="button" mat-icon-button (click)="logout()" *ngIf="!user.isGuest()">
			<mat-icon>power_settings_new</mat-icon>
		</button>
	</mat-toolbar>
	<mat-sidenav-container class="sidenav-container" [style.marginTop.px]="mobileQuery.matches ? 56 : 0">
		<mat-sidenav #snav [mode]="mobileQuery.matches ? 'over' : 'side'"
		[fixedInViewport]="mobileQuery.matches" fixedTopGap="56" class="sidenav">
		<mat-nav-list>
			<mat-list>
				<div *ngFor="let subMenu of menu">
					<div *ngxPermissionsOnly="subMenu.permissions">
						<h3 mat-subheader *ngIf="subMenu.name">{{subMenu.name}}</h3>
						<div *ngFor="let link of subMenu.links" (click)="mobileQuery.matches ? snav.toggle() : null">
							<a mat-list-item routerLink="{{link.route}}">{{link.name}}</a>
						</div>
						<mat-divider></mat-divider>
					</div>
				</div>
			</mat-list>
		</mat-nav-list>
		</mat-sidenav>
		<mat-sidenav-content class="components-container">
		<router-outlet></router-outlet>
		</mat-sidenav-content>
	</mat-sidenav-container>
</div>
