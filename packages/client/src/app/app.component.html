<div class="app-container">
  <app-loader></app-loader>

  <mat-toolbar color="primary" fxLayout="row" fxLayoutAlign="start center">
    <button mat-icon-button (click)="sn.toggle()">
      <mat-icon>menu</mat-icon>
    </button>

    <a mat-button class="home" routerLink="/">K-App</a>

    <div fxFlex></div>

    <mat-menu #userInfo="matMenu" [overlapTrigger]="false" class="connected-user-information">
      <h4 *ngIf="user.accountType === 'BARMAN'">Compte Barman {{user.account.nickName}}</h4>
      <h4 *ngIf="user.accountType === 'SERVICE'">Compte Service {{user.email}}</h4>
      <p>Membre depuis le {{user.createdAt | date:'d LLLL yyyy':'':'fr'}}</p>
      <div fxLayoutAlign="end">
        <a mat-raised-button routerLink="/acl/users/{{user._id}}/edit">Modifier mes informations</a>
      </div>
    </mat-menu>

    <div *ngIf="user.accountType !== 'GUEST'">
      <button mat-icon-button [matMenuTriggerFor]="userInfo">
        <mat-icon class="example-icon">person</mat-icon>
      </button>

      <button type="button" mat-icon-button (click)="logout()">
        <mat-icon>power_settings_new</mat-icon>
      </button>
    </div>

    <div *ngIf="user.accountType === 'GUEST'">
      <button mat-stroked-button type="button" routerLink="/auth/login">
        Se connecter
      </button>
    </div>
  </mat-toolbar>

  <mat-sidenav-container class="content-container">
    <mat-sidenav #sn>
      <app-nav-menu (onNavigate)="sn.close()"></app-nav-menu>
    </mat-sidenav>

    <mat-sidenav-content class="content">
      <router-outlet></router-outlet>
      <router-outlet name="modal"></router-outlet>
    </mat-sidenav-content>
  </mat-sidenav-container>

  <footer>
    <app-footer></app-footer>
  </footer>
</div>
