<div fxFlex>
  <!-- Header -->
  <div fxLayout="row" class="header-container">
    <div fxFlex *ngFor="let entry of range | keyvalue: byKeyOrder" class="day-title-container">
      <div
        fxLayout="column"
        class="day-title"
        matRipple
        [ngClass]="isSingleMode ? 'pointer' : null"
        (click)="onDayClick(entry.key)"
      >
        <div class="day-title-day">{{ entry.key | dfnsFormat: 'eee' }}</div>
        <div class="day-title-date">{{ entry.key | dfnsFormat: 'd' }}</div>
      </div>
    </div>
  </div>
  <!-- Body -->
  <div fxLayout="row" class="week-view">
    <ng-container *ngIf="isSingleMode; else multiMode">
      <ng-container *ngTemplateOutlet="dayView;context:getSelectedEntry()"></ng-container>
    </ng-container>

    <ng-template #multiMode>
      <ng-container *ngFor="let entry of range | keyvalue: byKeyOrder">
        <ng-container *ngTemplateOutlet="dayView;context:entry"></ng-container>
      </ng-container>
    </ng-template>

    <ng-template
      #dayView
      let-value="value"
      let-key="key"
    >
      <app-week-viewer-day
        class="day-view"
        [itemFormTemplate]="itemFormTemplate"
        [newItemFormTemplate]="newItemFormTemplate"
        [weekViewerController]="weekViewerController"
        [dayDate]="key"
        [items]="value"
      ></app-week-viewer-day>
    </ng-template>
  </div>
</div>
